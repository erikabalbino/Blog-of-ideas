<h1 class="mb-4"> âœ§ ðŸ˜œ âœ§ Nice Idea âœ§ ðŸ˜œ âœ§ </h1>

<h3> <%= @idea.title %> </h3>

<p> <%= @idea.description %> </p>

<p>By <%= @idea.user&.full_name %> </p>

<div> 
    <small>
        Posted <%= time_ago_in_words(@idea.created_at) %> ago
    </small>

</div>

<br />

<% if user_signed_in? %>
    <% if can?(:edit, @idea) %>
        <button type="button" class="btn btn-outline-primary">
            <%= link_to "Edit", edit_idea_path(@idea) %>
        </buttom>
    <% end %>

    <% if can?(:delete, @idea) %>
        <button type="button" class="btn btn-outline-primary ml-2">
        <%= link_to(
            "Delete",
            idea_path(@idea),
            method: :delete,
            data: {
                confirm: "Are you sure?"
                }
        ) %>
        </button>
    <% end %>
<% end %>

<h3 class="mt-4"> âœ§ Reviews âœ§ </h3>

<%= form_for [@idea, @review] do |f| %>

    <% if @review.errors.present? %>
        <p>
        <%= @review.errors.full_messages.join(', ') %>
        </p>
    <% end %>

    <div class="mb-2">
        <%= f.text_area(
            :body, class: "form-control"
        ) %>
    </div>

    <%= f.submit "Submit", class: "btn btn-outline-primary" %>

<% end %>

<div class="mt-3">
    <% @reviews.each do |review| %>

        <strong> 
            <%=  review.user&.full_name%>
        </strong> reviewed: <br />

        <%= review.body %> <br/>

        <small>
            Reviewed <%= time_ago_in_words(review.created_at) %> ago â€¢ 
        </small>
        
        <% if user_signed_in? && can?(:delete, review) %>
            <small>
                <%= link_to(
                    "Delete",
                    idea_review_path(@idea, review),
                    method: :delete,
                    data:{
                        confirm: "Are you sure?"
                    }
                    ) %> 
            </small> 
        <% end %>
        </p>

    <% end %>
</div>